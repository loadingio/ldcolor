!function(){var r,n="\\s*([+-]?\\d+|nan|NaN)\\s*",t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?|nan|NaN)\\s*",a="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l={hex3:/^#([0-9a-fA-F]{3})$/,hex6:/^#([0-9a-fA-F]{6})$/,rgbint:new RegExp("^rgb\\("+[n,n,n]+"\\)$"),rgbp:new RegExp("^rgb\\("+[a,a,a]+"\\)$"),rgbaint:new RegExp("^rgba\\("+[n,n,n,t]+"\\)$"),rgbap:new RegExp("^rgba\\("+[a,a,a,t]+"\\)$"),hslp:new RegExp("^hsl\\("+[t,a,a]+"\\)$"),hslap:new RegExp("^hsla\\("+[t,a,a,t]+"\\)$")},u={hex3:function(r){return{r:17*((r=parseInt(r[1],16))>>8),g:17*(240&r)>>4,b:17*(15&r),a:1}},hex6:function(r){return{r:(r=parseInt(r[1],16))>>16,g:r>>8&255,b:255&r,a:1}},rgbint:function(r){return{r:+r[1],g:+r[2],b:+r[3],a:1}},rgbp:function(r){return{r:255*r[1]/100,g:255*+r[2]/100,b:255*+r[3]/100,a:1}},rgbaint:function(r){return{r:+r[1],g:+r[2],b:+r[3],a:+r[4]}},rgbap:function(r){return{r:255*r[1]/100,g:255*+r[2]/100,b:255*r[3]/100,a:+r[4]}},hslap:function(r){return{h:+r[1],s:r[2]/100,l:r[3]/100,a:+r[4]}},hslp:function(r){return{h:+r[1],s:r[2]/100,l:r[3]/100,a:1}},all:function(r){var n,t,a;if("object"==typeof r)return null==r.a&&(r.a=1),r["@a"]?g.lab2rgb(r):r.c?g.hcl2rgb(r):r.hex?(n=l.hex3.exec(r.hex))?((t=u.hex3(n)||{}).a=r.a,t):(n=l.hex6.exec(r.hex))?((t=u.hex6(n)).a=r.a,t):r:r.value?u.all(r.value):r;if("number"==typeof r)return g.num2rgb(r);for(a in r=(r+"").trim().toLowerCase(),t=l)if(n=t[a].exec(r))return u[a](n);return"undefined"!=typeof named&&null!==named&&named[r]?g.num2rgb(named[r]):"transparent"===r?{r:NaN,g:NaN,b:NaN,a:0}:{r:NaN,g:NaN,b:NaN,a:NaN}}},e=function(r){return c(this,u.all(r))},b=6/29,h=3*b*b,i=.96422,o=.82521,g={num2rgb:function(r){return{r:r>>16,g:r>>8&255,b:255&r,a:1}},_hsl2rgb:function(r,n,t){return 255*(r<60?n+(t-n)*r/60:r<180?t:r<240?n+(t-n)*(240-r)/60:n)},hsl2rgb:function(r){var n,t=r.h,a=r.s,l=r.l,r=r.a;return t=t%360+360*(t<0),a=isNaN(t)||isNaN(a)?0:a,{r:0<(n=this._hsl2rgb(240<=t?t-240:120+t,a=2*l-(l=l+(l<.5?l:1-l)*a),l))?n:0,g:0<(n=this._hsl2rgb(t,a,l))?n:0,b:0<(n=this._hsl2rgb(t<120?240+t:t-120,a,l))?n:0,a:r}},rgb2hsl:function(r){var n,t,a,l,u,e=r.r,b=r.g,h=r.b,r=r.a,i=[e/255,b/255,h/255];return e=i[0],b=i[1],h=i[2],n=Math.max(e,b,h),u=Math.min(e,b,h),a=(n+u)/2,u=0==(t=n-u)?(l=(i=[0,0])[0],i[1]):(l=function(){switch(!1){case n!==e:return(b-h)/t%6*60;case n!==b:return 60*((h-e)/t+2);case n!==h:return 60*((e-b)/t+4)}}(),t/(1-Math.abs(2*a-1))),{h:l=(l+360)%360,s:u,l:a,a:r}},_rgb2lrgb:function(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)},_xyz2lab:function(r){return.008856451679035631<r?Math.pow(r,1/3):r/h+4/29},_lab2xyz:function(r){return b<r?r*r*r:h*(r-4/29)},_lrgb2rgb:function(r){return 0<(r=(r=255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055))<255?r:255)?r:0},lab2rgb:function(r){var r=[r["@l"],r["@a"],r["@b"],null!=r.a?r.a:1],n=r[1],t=r[2],a=r[3],r=(r[0]+16)/116,n=isNaN(n)?r:r+n/500,t=isNaN(t)?r:r-t/200;return n=i*g._lab2xyz(n),r=+g._lab2xyz(r),t=o*g._lab2xyz(t),{r:g._lrgb2rgb(3.1338561*n-1.6168667*r-.4906146*t),g:g._lrgb2rgb(-.9787684*n+1.9161415*r+.033454*t),b:g._lrgb2rgb(.0719453*n-.2289914*r+1.4052427*t),a:a}},lab2hcl:function(r){var n,r=[r["@l"],r["@a"],r["@b"],null!=r.a?r.a:1],t=r[0],a=r[1],l=r[2],r=r[3];return 0===a&&0===l?{h:NaN,c:0,l:t,a:r}:(n=180*Math.atan2(l,a)/Math.PI,{h:isNaN(n)?n:n<0?360+n:0<n?n:0,c:Math.sqrt(a*a+l*l),l:isNaN(t)||0<t?t:0,a:r})},hcl2lab:function(r){var n;return r.a=null!=r.a?r.a:1,isNaN(r.h)?{"@l":r.l,"@a":0,"@b":0,a:r.a}:(n=r.h*Math.PI/180,{"@l":r.l,"@a":Math.cos(n)*r.c,"@b":Math.sin(n)*r.c,a:r.a})},hcl2rgb:function(r){return this.lab2rgb(this.hcl2lab(r))}},s={same:function(r,n){var t;return null==n&&(n=this),(r=(t=[this.rgb(this.rgbaStr(r)),this.rgb(this.rgbaStr(n))])[0]).r===(n=t[1]).r&&r.g===n.g&&r.b===n.b&&(r.a||1).toFixed(3)===(n.a||1).toFixed(3)},rgb:function(r){return null!=(r=u.all(r=null==r?this:r)).c?g.lab2rgb(g.hcl2lab(r)):null!=r.h?g.hsl2rgb(r):r},rgbfv:function(r){return[(r=this.rgb(r=null==r?this:r)).r/255,r.g/255,r.b/255]},web:function(r,n){var t;return null==n&&(n=!1),"currentcolor"===(((r=null==r?this:r)||"")+"").toLowerCase()?r:null!=(t=s.rgb(r)).a&&(isNaN(t.a)||!t.a&&["r","g","b"].filter(function(r){return null!=t[r]&&isNaN(t[r])}).length)?"transparent":t.a<1?this.rgbaStr(t):this.hex(t,n)},rgbaStr:function(r){r=s.rgb(r=null==r?this:r);return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+r.a+")"},hsl:function(r){return null!=(r=u.all(r=null==r?this:r)).r?g.rgb2hsl(r):r},hex:function(r,n){var t,a;return null==n&&(n=!1),null!=(r=null==r?this:r)&&"boolean"==typeof r&&(r=(t=[this,r])[0],n=t[1]),a=s.rgb(r),a=["r","g","b"].map(function(r){r=((r=Math.round(a[r]))<255?r:255).toString(16)+"";return function(r,n){for(var t="";0<n;(n>>=1)&&(r+=r))1&n&&(t+=r);return t}("0",2-r.length)+r}).join(""),"#"+(a=n&&a[0]===a[1]&&a[2]===a[3]&&a[4]===a[5]?a[0]+a[2]+a[4]:a)},lab:function(r){var n,t,a,l,u,e;return(r=null==r?this:r).c?g.hcl2lab(r):(n=(r=s.rgb(r)).r,t=r.g,a=r.b,r=r.a,n=g._rgb2lrgb(n),t=g._rgb2lrgb(t),a=g._rgb2lrgb(a),l=g._xyz2lab(.2225045*n+.7168786*t+.0606169*a),n===t&&t===a?u=e=l:(u=g._xyz2lab((.4360747*n+.3850649*t+.1430804*a)/i),e=g._xyz2lab((.0139322*n+.0971045*t+.7141733*a)/o)),{"@l":116*l-16,"@a":500*(u-l),"@b":200*(l-e),a:r})},hcl:function(r){return g.lab2hcl(s.lab(r=null==r?this:r))},int:function(r){return r=s.rgb(r=null==r?this:r),(Math.round(r.r)<<16)+(Math.round(r.g)<<8)+Math.round(r.b)},rand:function(){return{h:360*Math.random(),s:Math.random(),l:Math.random(),a:1}},complement:function(r){r=s.rgb(r);return s.hsl({r:255-r.r,g:255-r.g,b:255-r.b})},lighter:function(r,n){return null==n&&(n=1),(r=s.hsl(r=null==r?this:r)).l*=Math.pow(1/.7,n),r},darker:function(r,n){return null==n&&(n=1),(r=s.hsl(r=null==r?this:r)).l*=Math.pow(.7,n),r}};for(r in c(e,s),e.prototype=c(Object.create(Object.prototype),s),s)!function(r,n){e.prototype[r]=function(){return n(this)}}(r,s[r]);function c(r,n){var t,a={}.hasOwnProperty;for(t in n)a.call(n,t)&&(r[t]=n[t]);return r}"undefined"!=typeof module&&null!==module?module.exports=e:window.ldColor=window.ldcolor=e}.call(this);
